# ğŸ§‘ğŸ»â€ğŸ³ Share My Recipe!

> ë‚˜ë§Œì˜ ë ˆì‹œí”¼ë¥¼ ê³µìœ í•´ë´ìš”! ğŸ¥—


## ğŸ“Œ ëª©ì°¨
1. [ê°œìš”](#-ê°œìš”)
2. [ì‚¬ìš© ì–¸ì–´ ë° ê°œë°œ í™˜ê²½](#-ì‚¬ìš©-ì–¸ì–´-ë°-ê°œë°œ-í™˜ê²½)
3. [í”„ë¡œì íŠ¸ ëª©ì ](#-í”„ë¡œì íŠ¸-ëª©ì )
4. [DB êµ¬ì¡°](#-db-êµ¬ì¡°)
5. [êµ¬í˜„ ê¸°ëŠ¥](#-êµ¬í˜„-ê¸°ëŠ¥)
6. [í•™ìŠµ ë‚´ìš© & ê°œì„ ëœ ë‚´ìš©](#-í•™ìŠµ-ë‚´ìš©-&-ê°œì„ ëœ-ë‚´ìš©)



## âœ” ê°œìš”
* ê°œë°œ ê¸°ê°„
  * 2023.01.01 ~
* ê°œë°œ ì¸ì›
  * ê°œì¸ í”„ë¡œì íŠ¸


## âœ” ì‚¬ìš© ì–¸ì–´ ë° ê°œë°œ í™˜ê²½
- IntelliJ
- Java 11
- Spring Boot 2.7
- Maven
- Spring Data JPA
- MySQL
- Thymeleaf


## âœ” í”„ë¡œì íŠ¸ ëª©ì 
* êµ­ë¹„ êµìš±ì—ì„œ ë°°ìš´ MyBatisê°€ ì•„ë‹Œ, í›„ì— ê°œì¸ì ìœ¼ë¡œ ê³µë¶€í•œ 
  * **JPA** ì ìš©
  * **Custom Exception** ì ìš©
  * **DTO** ì ìš©
  * **Test Code** ì‘ì„±
  
  í”„ë¡œì íŠ¸

## âœ” DB êµ¬ì¡°
![](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/fabfbe87-79bc-4ba8-8906-2b569277681f/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230130%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230130T042206Z&X-Amz-Expires=86400&X-Amz-Signature=3c801411256bf5de2d5a1e7c6221c597c5cf9b50ec59851446d241c3d99b0af7&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)



## âœ” êµ¬í˜„ ê¸°ëŠ¥
* Spring-Securityë¥¼ í™œìš©í•œ íšŒì›ê°€ì…
  * ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ì €ì¥
  * ì¤‘ë³µ ì•„ì´ë”” íšŒì›ê°€ì… ë¶ˆê°€ëŠ¥


* ë‚˜ë§Œì˜ ë ˆì‹œí”¼(ê²Œì‹œê¸€) ë“±ë¡
    * ë ˆì‹œí”¼(ê²Œì‹œê¸€) ë“±ë¡ / ìˆ˜ì • / ì‚­ì œ
    * ë ˆì‹œí”¼(ê²Œì‹œê¸€) ì´ë¯¸ì§€ ë“±ë¡
    * íšŒì›ì´ ì•„ë‹ ì‹œ ë ˆì‹œí”¼(ê²Œì‹œê¸€) ë“±ë¡ ë¶ˆê°€


* ê³µìœ ëœ ë ˆì‹œí”¼ ì €ì¥
  * íšŒì›ì´ ì•„ë‹ ì‹œ ë ˆì‹œí”¼(ê²Œì‹œê¸€) ì €ì¥ ë¶ˆê°€
  * ë ˆì‹œí”¼ ì¤‘ë³µ ì €ì¥ ë¶ˆê°€ëŠ¥


## âœ í•™ìŠµ ë‚´ìš© & ê°œì„ ëœ ë‚´ìš©
0. í”„ë¡œì íŠ¸ ëª©ì  ë³€ê²½
> View Pageì—ë§Œ ì§‘ì¤‘ â†’ ì½”ë“œì— ì§‘ì¤‘

<br>

1. JPA ì ìš©í•˜ê¸°
> MyBatisë¥¼ ì‚¬ìš©í–ˆë˜ ì§€ë‚œ í”„ë¡œì íŠ¸ â†’ JPA ì ìš©í•˜ê¸°

<br>

2. Custom Exception ì ìš©í•˜ê¸°
> ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì „í˜€ í•˜ì§€ ì•Šì•˜ë˜ ì§€ë‚œ í”„ë¡œì íŠ¸ â†’ ì˜ˆì™¸ ì²˜ë¦¬ ì ìš©
<details>
<summary>[ì´ì „ ìƒí™©] ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì „í˜€ í•˜ì§€ ì•Šì•˜ë˜ ì§€ë‚œ í”„ë¡œì íŠ¸ë“¤</summary>
<div markdown="1">

  * Ex) ë§ˆì´í˜ì´ì§€ì— ê²Œì‹œë¬¼ ì €ì¥ ì‹œ, ì¤‘ë³µ ì €ì¥ ì²˜ë¦¬
```java
// ë§ˆì´í˜ì´ì§€ ê²Œì‹œë¬¼ ì €ì¥
@ResponseBody
@RequestMapping("/insert_video")
public String insertVideo(@RequestParam HashMap<String, Object> param, HttpSession session) {
	String result = null;
	String memId = (String)session.getAttribute("sid");
	
	param.put("memId", memId);

	// ì €ì¥í•˜ë ¤ëŠ” ê²Œì‹œë¬¼ì´ ë§ˆì´í˜ì´ì§€ì— ìˆëŠ”ì§€ ê°¯ìˆ˜ë¥¼ ì²´í¬í•œë‹¤.
	int count = videoService.checkVideo(Integer.parseInt((String)param.get("videoNo")), memId);
	if(count == 0) { // ë§Œì•½ ê²Œì‹œë¬¼ì´ ì—†ë‹¤ë©´ (ë§ˆì´í˜ì´ì§€ ê²Œì‹œë¬¼ 0ê°œ)
		videoService.insertVideo(param);
		result = "0";
	}
	else { // ë§Œì•½ ê²Œì‹œë¬¼ì´ ìˆë‹¤ë©´, ì˜ë¯¸ì—†ëŠ” ìˆ«ì(result = 1) ë°˜í™˜
		result = "1";
	}
	
	return result;
}
```
</div>
</details>

<details>
<summary>[ì´ë²ˆ í”„ë¡œì íŠ¸ ì‹œ] ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì ìš©í•´ë³´ì•˜ë˜ ì´ë²ˆ í”„ë¡œì íŠ¸</summary>
<div markdown="1">

* Ex) ë§ˆì´í˜ì´ì§€ì— ê²Œì‹œë¬¼ ì €ì¥ ì‹œ, ì¤‘ë³µ ì €ì¥ ì²˜ë¦¬ : ë§ˆì´í˜ì´ì§€ ì»¨íŠ¸ë¡¤ëŸ¬
```java
try {
    cartRecipeId = cartService.addCart(cartRecipeDto, email);
} catch (AppException e) { // ë§Œë“¤ì–´ë†“ì€ AppExceptionìœ¼ë¡œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•œë‹¤.
    model.addAttribute("errorMessage", e.getMessage()); // ì˜ˆì™¸ì²˜ë¦¬ ë©”ì„¸ì§€ë¥¼ ë§ˆì´í˜ì´ì§€ viewì— ì „ë‹¬
    return new ResponseEntity<String>(e.getMessage(), HttpStatus.BAD_REQUEST);
}
```

* Service
```java
CartRecipe savedCartRecipe = cartRecipeRepository.findByCartIdAndRecipeId(cart.getId(), recipe.getId());

// ë ˆì‹œí”¼ ì¤‘ë³µ ì €ì¥
if(savedCartRecipe != null) { // ë§ˆì´í˜ì´ì§€ì— ê²Œì‹œë¬¼ì´ ì €ì¥ë˜ì–´ ìˆë‹¤ë©´ 
	// AppExceptionì˜ CART_RECIPE_DUPLICATEDë¡œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•œë‹¤.
  throw new AppException(ErrorCode.CART_RECIPE_DUPLICATED, recipe.getRecipeName() + "ì€ ì´ë¯¸ ì €ì¥ë˜ì–´ìˆìŠµë‹ˆë‹¤.");
}

CartRecipe cartRecipe = CartRecipe.createCartRecipe(cart, recipe);
cartRecipeRepository.save(cartRecipe);
```
</div>
</details>

<br>

3. DTO ì ìš©í•˜ê¸°
> DTOì˜ ì¡´ì¬ë¥¼ ëª°ë¼ Entityë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜ â†’ DTO ì ìš©

<br>

4. Test Code ì‘ì„±í•˜ê¸°
> ë§¤ë²ˆ View Pageë¥¼ í†µí•´ ì˜ë„í•œ ê²°ê³¼ê°€ ë§ëŠ”ì§€ í™•ì¸ â†’ Test Code ì ìš©





