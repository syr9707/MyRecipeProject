# ğŸ§‘ğŸ»â€ğŸ³ Share My Recipe!

> ë‚˜ë§Œì˜ ë ˆì‹œí”¼ë¥¼ ê³µìœ í•´ë´ìš”! ğŸ¥—

<br>

**ğŸ’¡ í”„ë¡œì íŠ¸ì— ëŒ€í•œ ë” ìì„¸í•œ ë‚´ìš©ì€ ì²¨ë¶€í•œ Notionì— ìˆìŠµë‹ˆë‹¤.**

## ğŸ“Œ ëª©ì°¨
1. [ê°œìš”](#-ê°œìš”)
2. [ì‚¬ìš© ì–¸ì–´ ë° ê°œë°œ í™˜ê²½](#-ì‚¬ìš©-ì–¸ì–´-ë°-ê°œë°œ-í™˜ê²½)
3. [í”„ë¡œì íŠ¸ ëª©ì ](#-í”„ë¡œì íŠ¸-ëª©ì )
4. [DB êµ¬ì¡°](#-db-êµ¬ì¡°)
5. [êµ¬í˜„ ê¸°ëŠ¥](#-êµ¬í˜„-ê¸°ëŠ¥)
6. [í•™ìŠµ ë‚´ìš© & ê°œì„ ëœ ë‚´ìš©](#-í•™ìŠµ-ë‚´ìš©--ê°œì„ ëœ-ë‚´ìš©)



## âœ” ê°œìš”
* ê°œë°œ ê¸°ê°„
  * 2023.01.01 ~
* ê°œë°œ ì¸ì›
  * ê°œì¸ í”„ë¡œì íŠ¸


## âœ” ì‚¬ìš© ì–¸ì–´ ë° ê°œë°œ í™˜ê²½
- IntelliJ
- Java 11
- Spring Boot 2.7
- Maven
- Spring Data JPA
- MySQL
- Thymeleaf


## âœ” í”„ë¡œì íŠ¸ ëª©ì 
* êµ­ë¹„ êµìš±ì—ì„œ ë°°ìš´ MyBatisê°€ ì•„ë‹Œ, í›„ì— ê°œì¸ì ìœ¼ë¡œ ê³µë¶€í•œ 
  * **JPA** ì ìš©
  * **Custom Exception** ì ìš©
  * **DTO** ì ìš©
  * **Test Code** ì‘ì„±
  
  í”„ë¡œì íŠ¸

## âœ” DB êµ¬ì¡°
![](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/fabfbe87-79bc-4ba8-8906-2b569277681f/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230130%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230130T042206Z&X-Amz-Expires=86400&X-Amz-Signature=3c801411256bf5de2d5a1e7c6221c597c5cf9b50ec59851446d241c3d99b0af7&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)



## âœ” êµ¬í˜„ ê¸°ëŠ¥
* Spring-Securityë¥¼ í™œìš©í•œ íšŒì›ê°€ì…
  * ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ì €ì¥
  * ì¤‘ë³µ ì•„ì´ë”” íšŒì›ê°€ì… ë¶ˆê°€ëŠ¥


* ë ˆì‹œí”¼(ê²Œì‹œë¬¼) ë“±ë¡
    * ì¡°íšŒìˆ˜ ì¸¡ì •
    * ë“±ë¡ / ì‚­ì œ / ì¡°íšŒ / ìˆ˜ì •(ADMIN ê¶Œí•œì´ ì—†ì„ ì‹œ ë¹„í™œì„±)
    * ë ˆì‹œí”¼(ê²Œì‹œê¸€) ì´ë¯¸ì§€ ë“±ë¡
    * íšŒì›ì´ ì•„ë‹ ì‹œ ë ˆì‹œí”¼(ê²Œì‹œê¸€) ë“±ë¡ ë¶ˆê°€


* ë ˆì‹œí”¼(ê²Œì‹œë¬¼) ì €ì¥
  * íšŒì›ì´ ì•„ë‹ ì‹œ ë ˆì‹œí”¼(ê²Œì‹œë¬¼) ì €ì¥ ë¶ˆê°€
  * ë ˆì‹œí”¼(ê²Œì‹œë¬¼) ì¤‘ë³µ ì €ì¥ ë¶ˆê°€ëŠ¥


## âœ í•™ìŠµ ë‚´ìš© & ê°œì„ ëœ ë‚´ìš©
### 0. í”„ë¡œì íŠ¸ ëª©ì  ë³€ê²½
> View Pageì—ë§Œ ì§‘ì¤‘ â†’ ì½”ë“œì— ì§‘ì¤‘
<details>
<summary>[ì´ì „ ìƒí™©] ë³´ì—¬ì§€ëŠ” View Pageì—ë§Œ ì§‘ì¤‘</summary>
<div markdown="1">

```
êµ­ë¹„êµìœ¡ì„ ë°›ìœ¼ë©° íŒ€ & ê°œì¸ í”„ë¡œì íŠ¸ë¥¼ í–ˆì„ ì‹œì—” ë³´ì—¬ì§€ëŠ” View Pageì—ë§Œ ì§‘ì¤‘í–ˆìŠµë‹ˆë‹¤.

ë”°ë¼ì„œ ì½”ë“œê°€ ì–´ë–»ê²Œ ëë“ , 
ë³´ì—¬ì§€ëŠ” í™”ë©´(View)ë§Œ ì›í•˜ëŠ” ê²°ê³¼ê°€ ë‚˜ì˜¤ê²Œë” ì½”ë“œë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.
ê·¸ ê²°ê³¼ 
ì–´ë–¤ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë©´, ë‹¤ë¥¸ ê¸°ëŠ¥ì— ë¬¸ì œê°€ ìƒê¸°ê³  
ê·¸ ë¬¸ì œë¥¼ í•´ê²°í•˜ë©´, ë˜ë‹¤ë¥¸ ë¬¸ì œê°€ ìƒê¸°ëŠ” ìƒí™©ì´ ë°˜ë³µëìŠµë‹ˆë‹¤.

ê·¼ë³¸ì ì¸ ë¬¸ì œë¥¼ í•´ê²°í•˜ì§€ ëª»í•˜ê³  ë¬¸ì œ ìƒí™©ì„ ë§‰ê¸°ì—ë§Œ ê¸‰í–ˆìŠµë‹ˆë‹¤.
ê²°ê³¼ì ìœ¼ë¡ , ë§¤ìš° ì§€ì €ë¶„í•˜ê³  ì•Œ ìˆ˜ ì—†ëŠ” 
ì¦‰, ìœ ì§€ë³´ìˆ˜ê°€ ë§¤ìš° ì–´ë ¤ìš´ ì½”ë“œê°€ ìµœì¢… ê²°ê³¼ë¬¼ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.

ê·¸ë•Œì—ëŠ” ê·¸ ë°©ì‹ì´ ë§ëŠ” ë°©ì‹ì¸ ì¤„ ì•Œì•˜ìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ UIì— ì‹ ê²½ì“°ëŠ” ê²ƒì´ ì•„ë‹Œ ê¸°ëŠ¥ êµ¬í˜„ ì½”ë“œì— ì§‘ì¤‘í•´ì•¼í•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œê²Œë˜ì—ˆê³ , 
ì´ë²ˆ í”„ë¡œì íŠ¸ë¶€í„´ ì½”ë“œì— ì§‘ì¤‘í•˜ëŠ” ê²ƒìœ¼ë¡œ ëª©ì ì„ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
```
</div>
</details>

<details>
<summary>[ì´ë²ˆ í”„ë¡œì íŠ¸ ì‹œ] ê¸°ëŠ¥ êµ¬í˜„ ì½”ë“œì— ì§‘ì¤‘</summary>
<div markdown="1">

```
ì œì¼ í° ë³€í™”ëŠ” ì—¬íƒœê» ë°°ì›Œì™”ê³  ì ìš©ì‹œì¼°ë˜ MyBatisê°€ ì•„ë‹Œ, 
ìƒˆë¡­ê²Œ í•™ìŠµí•œ JPAë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.

ë˜í•œ Test Codeë„ í”„ë¡œì íŠ¸ì— ì ìš©ì‹œì¼œë³´ì•˜ìŠµë‹ˆë‹¤.
ê·¸ì— ë”°ë¼ ì˜ˆì™¸ ìƒí™©ë“¤ì— ëŒ€í•œ ì½”ë“œë“¤ë„ ìƒê°í•´ë³´ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
```
</div>
</details>

<br>

### 1. JPA ì ìš©í•˜ê¸°
> MyBatisë¥¼ ì‚¬ìš©í–ˆë˜ ì§€ë‚œ í”„ë¡œì íŠ¸ â†’ JPA ì ìš©í•˜ê¸°

```text
ğŸ¤” MyBatisë¥¼ ë°°ìš¸ ë•, ë‹¹ì—°íˆ ê·¸ ê¸°ìˆ ë§Œ ì“°ëŠ” ê²ƒì¸ ì¤„ ì•Œì•˜ìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ í›„ì—, JPAë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ê³ 
ê°œì¸ì ìœ¼ë¡œ í•™ìŠµ í›„ ì ìš©ì‹œì¼°ìŠµë‹ˆë‹¤.

ì‹œì‘í•  ë• JPAì˜ ê°œë…ì´ MyBatisì²˜ëŸ¼ SQL ì¿¼ë¦¬ì— ê°ì²´ë¥¼ Mappingë§Œ í•˜ëŠ”
ë‹¨ìˆœ ì‘ì—…ì¸ ì¤„ ì•Œì•˜ìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ í•™ìŠµí•˜ë‹¤ë³´ë‹ˆ,
ğŸ’¡ 'JPAëŠ” Javaì˜ OOPì˜ ê°œë…ì„ ì œëŒ€ë¡œ ì•Œê³  í™œìš©í•  ì¤„ ì•Œì•„ì•¼ í•˜ëŠ” ë“±
ì œëŒ€ë¡œ ìµíˆê¸°ê°€ ë§¤ìš° ê¹Œë‹¤ë¡­ê³  ì–´ë µë‹¤'ëŠ” ì‚¬ì‹¤ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
```

<details>
<summary>[ì´ì „ ìƒí™©] MyBaisë¥¼ ì´ìš©í•´ êµ¬í˜„í–ˆë˜ íšŒì›ì •ë³´ ì €ì¥ & íšŒì›ì •ë³´ ìˆ˜ì •</summary>
<div markdown="1">

<details>
<summary>Ex 1) íšŒì›ì •ë³´ ì €ì¥</summary>
<div markdown="1">

* SQL Mapper
```xml
<!-- íšŒì› ê°€ì… -->
<insert id="insertMember" parameterType="com.jobdongsan.project.model.MemberVO">
	INSERT INTO member (memId, memPw, memName, memEmail, memChildBirth, memHP, memZipcode, memAddress1, memAddress2)
	VALUES (#{memId}, #{memPw}, #{memName}, #{memEmail}, #{memChildBirth}, #{memHP}, #{memZipcode}, #{memAddress1}, #{memAddress2})
</insert>

<!-- Oauth íšŒì› ê°€ì…  -->
<insert id="insertOauthMember" parameterType="com.jobdongsan.project.model.MemberVO">
	INSERT INTO member (memId, memPw, memName, memEmail, profileImg, provider, providerId)
	VALUES (#{memId}, #{memPw}, #{memName}, #{memEmail}, #{profileImg}, #{provider}, #{providerId})
</insert>
```

* MemberDAO Interface
```java
public void insertMember(MemberVO vo); // íšŒì› ê°€ì…
public void insertOauthMember(MemberVO vo); // SNS íšŒì› ê°€ì…
```

* MemberService
```java
// íšŒì› ê°€ì…
@Override
public void insertMember(MemberVO vo) {
	// ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ì²˜ë¦¬í•œ í›„ mapperì—ê²Œ ì „ë‹¬
	String encodedPwd = pwdEncoder.encode(vo.getMemPw());
	vo.setMemPw(encodedPwd);
	
	dao.insertMember(vo); // íšŒì›ì •ë³´ ì €ì¥(INSERT) SQL Mapper
}

// SNS íšŒì› ê°€ì…
@Override
public void insertOauthMember(MemberVO vo) {
	dao.insertOauthMember(vo);
}
```

</div>
</details>

<details>
<summary>Ex 2) íšŒì›ì •ë³´ ìˆ˜ì •</summary>
<div markdown="1">

* SQL Mapper
```xml
<!-- íšŒì› ì •ë³´ ìˆ˜ì • -->
<update id="updateMemberInfo" parameterType="com.jobdongsan.project.model.MemberVO">
	UPDATE member SET memPw = #{memPw}, memName = #{memName}, memEmail = #{memEmail},
	memChildBirth = #{memChildBirth}, memHP = #{memHP}, memZipcode = #{memZipcode}, memAddress1 = #{memAddress1},
	memAddress2 = #{memAddress2}, profileImg = #{profileImg} WHERE memId = #{memId}
</update>
```

* MemberDAO Interface
```java
public void updateMemberInfo(MemberVO vo); // íšŒì› ì •ë³´ ìˆ˜ì •
```

* MemberService
```java
@Override
public void updateMemberInfo(MemberVO vo) {
	String encodedPwd = pwdEncoder.encode(vo.getMemPw());
	vo.setMemPw(encodedPwd);
	
	dao.updateMemberInfo(vo);
}
```

</div>
</details>

</div>
</details>

<details>
<summary>[ì´ë²ˆ í”„ë¡œì íŠ¸ ì‹œ] JPAë¥¼ ì´ìš©í•´ êµ¬í˜„í•œ íšŒì›ì •ë³´ ì €ì¥ & íšŒì›ì •ë³´ ìˆ˜ì •</summary>
<div markdown="1">

<details>
<summary>Ex 1) íšŒì›ì •ë³´ ì €ì¥</summary>
<div markdown="1">

* MemberRepository
```java
public interface MemberRepository extends JpaRepository<Member, Long> {
    // ì´ë©”ì¼ë¡œ ì¤‘ë³µ ê²€ì‚¬
    Member findByEmail(String email);
}
```

* MemberService
```java
public Member saveMember(Member member) {
    validateDuplicateMember(member); // íšŒì›ê°€ì… ì¤‘ë³µ ê²€ì‚¬
    return memberRepository.save(member); // íšŒì› ì •ë³´ ì €ì¥
}

/**
 * íšŒì›ê°€ì… ì¤‘ë³µ ê²€ì‚¬
 * ì´ë©”ì¼ ì¤‘ë³µ ë¶ˆê°€ëŠ¥
 * */
private void validateDuplicateMember(Member member) {
    Member findMember = memberRepository.findByEmail(member.getEmail()); // ì´ë©”ì¼ë¡œ ì°¾ì€ íšŒì›ì„ Memberì— ë‹´ëŠ”ë‹¤.
    if(findMember != null) {
        // ì˜ˆì™¸ì²˜ë¦¬
        throw new AppException(ErrorCode.MEMBERNAME_DUPLICATED, findMember.getName() + "ì€ ì´ë¯¸ ìˆìŠµë‹ˆë‹¤.");
    }
}
```

</div>
</details>

<details>
<summary>Ex 2) íšŒì›ì •ë³´ ìˆ˜ì • : ì›í•˜ëŠ” ì •ë³´ë§Œ ì„ íƒí•´ ìˆ˜ì •</summary>
<div markdown="1">

* Member Entity
```java
public void updateMember(MemberFormDto memberFormDto, String password) {
    this.name = memberFormDto.getName();
    this.password = password;
    this.address = memberFormDto.getAddress();
}
```

* MemberService
```java
public Long updateMember(Long memberId, MemberFormDto memberFormDto) {

    Member findMember = memberRepository.findById(memberId)
            .orElseThrow(EntityNotFoundException::new);

    String password = passwordEncoder.encode(findMember.getPassword());

    findMember.updateMember(memberFormDto, password);

    return findMember.getId();
}
```

</div>
</details>

</div>
</details>

<details>
<summary>ëŠë‚€ì </summary>
<div markdown="1">

- JPA ë•ë¶„ì— SQLì— ì˜ì¡´ì ì¸ ì½”ë“œë¥¼ ì§œì§€ ì•Šê³ , Java ì¤‘ì‹¬ì˜ ì½”ë“œë¥¼ ì§¤ ìˆ˜ ìˆì—ˆë‹¤.
- SQL Mapperë¡œ êµ¬í˜„í–ˆì„ ë•Œì²˜ëŸ¼ ìì£¼ ì“°ëŠ” CRUD ë©”ì†Œë“œë¥¼ ì§ì ‘ ë‹¤ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ë¼ ì½”ë“œì˜ ì–‘ì´ ì¤„ì—ˆë‹¤.
- JPAëŠ” ê¸°ë³¸ì ì¸ CRUDë¥¼ ì œê³µí•´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ë³´ë‹¤ ë” ì§‘ì¤‘í•  ìˆ˜ ìˆë‹¤.
- ê²€ìƒ‰ ê¸°ëŠ¥ì— í•œí•´ ì•„ì§ê¹Œì§€ëŠ” Querydslë³´ë‹¤ myBatisê°€ ì§ê´€ì ì´ì–´ì„œ ê·¸ëŸ°ì§€ ë” ì´í•´ê°€ ì‰½ë‹¤.
- Querydslì˜ ë” ê¹Šì€ ì´í•´ì™€ í•™ìŠµì´ í•„ìš”í•˜ë‹¤.

</div>
</details>

<br>

### 2. Exceptionê³¼ Custom Exception ì ìš©í•˜ê¸°
> ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì „í˜€ í•˜ì§€ ì•Šì•˜ë˜ ì§€ë‚œ í”„ë¡œì íŠ¸ â†’ ì˜ˆì™¸ ì²˜ë¦¬ ì ìš©

```text
ğŸ¤” íšŒì› ê°€ì…ê³¼ ë¡œê·¸ì¸ ê¸°ëŠ¥ì€ ê°„ë‹¨í•œ ì¤„ ì•Œì•˜ìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ íšŒì› ê°€ì…ê³¼ ë¡œê·¸ì¸ ë¿ ì•„ë‹ˆë¼ 'ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ëŠ” ëª¨ë“  ê³¼ì •'ì—ì„ , 
ì—¬ëŸ¬ê°€ì§€ ìƒí™©ë“¤ê³¼ ì˜¤ë¥˜ë“¤ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ë”°ë¼ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ì˜ˆì™¸ ìƒí™©ë“¤ì— ëŒ€í•œ ê²ƒë“¤ì„ ê³ ë¯¼í•´ë³´ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ğŸ’¡ ê·¸ ê³¼ì •ì—ì„  'ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ê°€ì§€'ì´ê³ , 
'ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ customí•˜ì—¬ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ'ë„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
```

<details>
<summary>[ì´ì „ ìƒí™©] ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì „í˜€ í•˜ì§€ ì•Šì•˜ë˜ ì§€ë‚œ í”„ë¡œì íŠ¸ë“¤</summary>
<div markdown="1">

* Ex) ë§ˆì´í˜ì´ì§€ì— ê²Œì‹œë¬¼ ì €ì¥ ì‹œ, ì¤‘ë³µ ì €ì¥ ì²˜ë¦¬
```java
// ë§ˆì´í˜ì´ì§€ ê²Œì‹œë¬¼ ì €ì¥
@ResponseBody
@RequestMapping("/insert_video")
public String insertVideo(@RequestParam HashMap<String, Object> param, HttpSession session) {
	String result = null;
	String memId = (String)session.getAttribute("sid");
	
	param.put("memId", memId);

	// ì €ì¥í•˜ë ¤ëŠ” ê²Œì‹œë¬¼ì´ ë§ˆì´í˜ì´ì§€ì— ìˆëŠ”ì§€ ê°¯ìˆ˜ë¥¼ ì²´í¬í•œë‹¤.
	int count = videoService.checkVideo(Integer.parseInt((String)param.get("videoNo")), memId);
	if(count == 0) { // ë§Œì•½ ê²Œì‹œë¬¼ì´ ì—†ë‹¤ë©´ (ë§ˆì´í˜ì´ì§€ ê²Œì‹œë¬¼ 0ê°œ)
		videoService.insertVideo(param);
		result = "0";
	}
	else { // ë§Œì•½ ê²Œì‹œë¬¼ì´ ìˆë‹¤ë©´, ì˜ë¯¸ì—†ëŠ” ìˆ«ì(result = 1) ë°˜í™˜
		result = "1";
	}
	
	return result;
}
```

* SQL Mapper : ë§ˆì´í˜ì´ì§€ì— ë™ì¼ ê²Œì‹œë¬¼ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
```xml
<!-- ë§ˆì´í˜ì´ì§€ì— ë™ì¼ ê²Œì‹œë¬¼ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸ -->
<!-- íšŒì›ì˜ ë§ˆì´í˜ì´ì§€ì— ì €ì¥í•˜ê³ ì í•˜ëŠ” ê²Œì‹œë¬¼ì˜ ê°œìˆ˜ ì¹´ìš´íŠ¸ -->
<select id="checkVideo" parameterType="hashmap" resultType="int">
	SELECT COUNT(*)
	FROM my_history 
	WHERE videoNo=#{videoNo} AND memId=#{memId} 
</select>
```

</div>
</details>

<details>
<summary>[ì´ë²ˆ í”„ë¡œì íŠ¸ ì‹œ] ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì ìš©í•´ë³´ì•˜ë˜ ì´ë²ˆ í”„ë¡œì íŠ¸</summary>
<div markdown="1">

<details>
<summary>Ex 1) íšŒì› ê°€ì… ì¤‘ë³µ ê²€ì‚¬</summary>
<div markdown="1">

* ë‹¨ê³„ 1 : throw new IllegalStateException
```java
private void validateDuplicateMember(Member member) {
    Member findMember = memberRepository.findByEmail(member.getEmail()); // ì´ë©”ì¼ë¡œ ì°¾ì€ íšŒì›ì„ Memberì— ë‹´ëŠ”ë‹¤.
    if(findMember != null) { // íšŒì› ì •ë³´ê°€ ì¡´ì¬í•˜ë©´
        // IllegalStateException ì˜ˆì™¸ì²˜ë¦¬
        throw new IllegalStateException("ì´ë¯¸ ê°€ì…ëœ íšŒì›ì…ë‹ˆë‹¤.");
    }
}
```

* ë‹¨ê³„ 2 : customí•œ AppExceptionìœ¼ë¡œ ì²˜ë¦¬
```java
private void validateDuplicateMember(Member member) {
    Member findMember = memberRepository.findByEmail(member.getEmail()); // ì´ë©”ì¼ë¡œ ì°¾ì€ íšŒì›ì„ Memberì— ë‹´ëŠ”ë‹¤.
    if(findMember != null) { // íšŒì› ì •ë³´ê°€ ì¡´ì¬í•˜ë©´
        // AppException ì˜ˆì™¸ì²˜ë¦¬
        // MEMBERNAME_DUPLICATED(HttpStatus.CONFLICT, "")
        throw new AppException(ErrorCode.MEMBERNAME_DUPLICATED, findMember.getName() + "ì€ ì´ë¯¸ ìˆìŠµë‹ˆë‹¤.");
    }
}
```

</div>
</details>

<details>
<summary>Ex 2) ë§ˆì´í˜ì´ì§€ì— ê²Œì‹œë¬¼ ì €ì¥ ì‹œ, ì¤‘ë³µ ì €ì¥ ì²˜ë¦¬</summary>
<div markdown="1">

* CartController : ë§ˆì´í˜ì´ì§€ ì»¨íŠ¸ë¡¤ëŸ¬
```java
try {
    cartRecipeId = cartService.addCart(cartRecipeDto, email);
} catch (AppException e) { // ë§Œë“¤ì–´ë†“ì€ AppExceptionìœ¼ë¡œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•œë‹¤.
    model.addAttribute("errorMessage", e.getMessage()); // ì˜ˆì™¸ì²˜ë¦¬ ë©”ì„¸ì§€ë¥¼ ë§ˆì´í˜ì´ì§€ viewì— ì „ë‹¬
    return new ResponseEntity<String>(e.getMessage(), HttpStatus.BAD_REQUEST);
}
```

* CartService
```java
CartRecipe savedCartRecipe = cartRecipeRepository.findByCartIdAndRecipeId(cart.getId(), recipe.getId());

// ë ˆì‹œí”¼ ì¤‘ë³µ ì €ì¥
if(savedCartRecipe != null) { // ë§ˆì´í˜ì´ì§€ì— ê²Œì‹œë¬¼ì´ ì €ì¥ë˜ì–´ ìˆë‹¤ë©´
    // AppExceptionì˜ CART_RECIPE_DUPLICATEDë¡œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•œë‹¤.
    throw new AppException(ErrorCode.CART_RECIPE_DUPLICATED, recipe.getRecipeName() + "ì€ ì´ë¯¸ ì €ì¥ë˜ì–´ìˆìŠµë‹ˆë‹¤.");
}

CartRecipe cartRecipe = CartRecipe.createCartRecipe(cart, recipe);
cartRecipeRepository.save(cartRecipe);
```

</div>
</details>

</div>
</details>

<details>
<summary>ëŠë‚€ì </summary>
<div markdown="1">

- Custom Exceptionì˜ Test Code ì‹¤íŒ¨ë¡œ ë‹¤ì‹œ ì›ë˜ ì½”ë“œë¡œ ëŒì•„ê°„ ê²ƒë“¤ì´ ìˆì–´ ì•„ì‰½ë‹¤.
- ì˜¤ë¥˜ ì—†ì´ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ë°°ìš°ê³  ì‹¶ë‹¤.
- ë‚´ê°€ êµ¬í˜„í•œ Custom Exceptionì´ ë§ëŠ” ë°©ì‹ì¸ì§€ ëª¨ë¥´ê² ë‹¤. ì œëŒ€ë¡œ ë°°ìš°ê³  ì‹¶ë‹¤.

</div>
</details>

<br>

### 3. DTO ì ìš©í•˜ê¸°
> DTOì˜ ì¡´ì¬ë¥¼ ëª°ë¼ Entityë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜ â†’ DTO ì ìš©

```text
ğŸ¤” ì—”í‹°í‹°ë¥¼ ì§ì ‘ ë°˜í™˜í–ˆë˜ ì´ì „ í”„ë¡œì íŠ¸ë“¤ê³¼ ë‹¬ë¦¬, 
ë³„ë„ì˜ DTOë¥¼ ë§Œë“¤ì–´ ë°˜í™˜í•˜ì˜€ìŠµë‹ˆë‹¤.

ì‹¤ë¬´ë¥¼ ê²½í—˜í•´ë³¸ ì ì´ ì—†ì–´ ì™€ë‹¿ì§€ ì•ŠëŠ” ë¶€ë¶„ì´ì—ˆìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ ì„±ëŠ¥ ë¬¸ì œë¥¼ ì•¼ê¸°í•  ìˆ˜ ìˆëŠ” ê²ƒë“¤ì— ëŒ€í•´ ê³µë¶€í•´ë³´ì•˜ê³ , 
ğŸ’¡ ê·¸ ì¤‘ 'ì—”í‹°í‹°ë¥¼ ì›¹ì— ë…¸ì¶œí•´ì„œëŠ” ì•ˆ ëœë‹¤ëŠ” ê²ƒ'ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
```

<details>
<summary>[ì´ì „ ìƒí™©] DTOì˜ ì¡´ì¬ë¥¼ ëª°ëë˜ ì§€ë‚œ í”„ë¡œì íŠ¸ë“¤</summary>
<div markdown="1">

* Ex) ëª¨ë“  ê²Œì‹œë¬¼ ì¶œë ¥
* [Controller] : DTOë¥¼ ìƒì„±í•˜ì§€ ì•Šê³ , Entityë¥¼ ë°”ë¡œ ë°˜í™˜í–ˆë‹¤.
```java
// ì „ì²´ ê²Œì‹œë¬¼ ì¶œë ¥
@RequestMapping("/job_index")
public String viewJobAllList(Model model) {

  // ê²Œì‹œë¬¼ Entityë¥¼ ê·¸ëŒ€ë¡œ Serivceì— ì „ë‹¬í•œë‹¤.
  ArrayList<JobVO> jobList = jobService.listAllJob();
  model.addAttribute("jobList", jobList); // View Pageì— Entityë¥¼ ë°”ë¡œ ì „ë‹¬í•œë‹¤.

  return "job/job_index";
}
```
</div>
</details>

<details>
<summary>[ì´ë²ˆ í”„ë¡œì íŠ¸ ì‹œ] DTOê°€ ì™œ ì ìš©ë˜ì–´ì•¼ í•˜ëŠ”ì§€ í•™ìŠµí•˜ê³  ì ìš©</summary>
<div markdown="1">

* â€˜DTOë¥¼ ì™œ ë§Œë“œëŠ” ê²ƒì¸ê°€'ì— ëŒ€í•œ ê³ ì°°
* Ex) ëª¨ë“  ê²Œì‹œë¬¼ ì¶œë ¥
* [MainItemDto]
```java
@Setter
@Getter
public class MainItemDto {

    private Long id;
    private String recipeName;
    private String recipeDetail;
    private String imgUrl;
    private Integer price;

   /**
   * @QueryProjection : Querydslë¡œ ê²°ê³¼ ì¡°íšŒ ì‹œ, MainItemDto ê°ì²´ë¡œ ë°”ë¡œ ë°›ì•„ì˜´
   * - DTO í´ë˜ìŠ¤ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì • ì—†ì´ ë°”ë¡œ DTO ê°ì²´ë¥¼ ë½‘ì•„ëƒ„
   * - DTO ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ëœ QDTO ê°ì²´ì˜ ìƒì„±ìë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ
   * */
    @QueryProjection
    public MainItemDto(Long id, String recipeName, String recipeDetail, String imgUrl, Integer price) {
        this.id = id;
        this.recipeName = recipeName;
        this.recipeDetail = recipeDetail;
        this.imgUrl = imgUrl;
        this.price = price;
    }
}
```

* MainController
```java
@GetMapping(value = "/")
public String main(RecipeSearchDto recipeSearchDto, Optional<Integer> page, Model model){

    Pageable pageable = PageRequest.of(page.isPresent() ? page.get() : 0, 6);

    // ì¶œë ¥í•  ê²Œì‹œë¬¼ DTOë¥¼ Serviceì— ì „ë‹¬í•œë‹¤.
    Page<MainItemDto> recipes = recipeService.getMainRecipePage(recipeSearchDto, pageable);

    model.addAttribute("recipes", recipes);
    model.addAttribute("recipeSearchDto", recipeSearchDto);
    model.addAttribute("maxPage", 5);

    return "main";
}
```

</div>
</details>

<details>
<summary>ëŠë‚€ì </summary>
<div markdown="1">

- DTOê°€ ì—†ì„ìˆ˜ë¡ êµ¬ì¡°ê°€ ë‹¨ìˆœí•˜ê³  ì§ê´€ì ì´ì–´ì„œ ì´í•´ê°€ ì‰¬ì› ë‹¤.
- í•˜ì§€ë§Œ DTOê°€ ë§ì•„ì§ˆìˆ˜ë¡ êµ¬ì¡°ê°€ ë³µì¡í•´ì§€ê³  DTOì™€ Entity ì‚¬ì´ì˜ ë³€í™˜, DTOì™€ Serviceì˜ êµë¥˜ ë“±ì´ ì´í•´í•˜ê¸° ì–´ë ¤ì›Œì¡Œë‹¤.
- ë”°ë¼ì„œ RequestDTOì™€ ResponseDTOë¡œ ë” ì„¸ë¶„í™”í•´ì„œ ë‚˜ëˆ„ë ¤ë©´, DTOì˜ ë” ê¹Šì€ ì´í•´ê°€ í•„ìš”í•˜ë‹¤.
- ê°ì²´ ì§€í–¥ ì„¤ê³„ ì—­ì‹œ ë” ì œëŒ€ë¡œ ëœ ì´í•´ì™€ ì ìš©ì´ í•„ìš”í•˜ë‹¤.

</div>
</details>

<br>

### 4. Test Code ì‘ì„±í•˜ê¸°
> ë§¤ë²ˆ View Pageë¥¼ í†µí•´ ì˜ë„í•œ ê²°ê³¼ê°€ ë§ëŠ”ì§€ í™•ì¸ â†’ Test Code ì ìš©

```text
ğŸ¤” ì´ì „ í”„ë¡œì íŠ¸ë“¤ì—ì„  
Test Codeë¥¼ ì‘ì„±í•˜ì§€ ì•Šê³ , ì‘ì„±í•œ ì½”ë“œê°€ ì •ìƒì ìœ¼ë¡œ ëŒì•„ê°€ëŠ”ì§€ 
ë§¤ë²ˆ View Pageì—ì„œ í™•ì¸ì„ í–ˆì—ˆìŠµë‹ˆë‹¤.

Test Codeë¥¼ ì‘ì„±í•¨ìœ¼ë¡œì¨ ì½”ë“œì˜ ì¶”ê°€ ë˜ëŠ” ë³€ê²½ì´ ìˆì„ ê²½ìš° 
ë¬¸ì œë¥¼ ë¹ ë¥´ê²Œ íŒŒì•…í•˜ì—¬ ê°œë°œì˜ ìœ ì§€ë³´ìˆ˜ì„±ì„ ì¦ì§„ì‹œí‚¬ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œë˜ì—ˆìŠµë‹ˆë‹¤.

ë”°ë¼ì„œ ì´ë²ˆ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ 
ğŸ’¡ 'Test Codeë¥¼ ì‘ì„±í–ˆê³ , í›„ì— View Page ì½”ë“œë¥¼ ì™„ì„±'í–ˆìŠµë‹ˆë‹¤.
```

<details>
<summary>[ì´ì „ ìƒí™©] Test Codeì˜ ì¡´ì¬ ìì²´ë¥¼ ëª°ëë˜ ì§€ë‚œ í”„ë¡œì íŠ¸ë“¤</summary>
<div markdown="1">

* Ex) Test View Pageë¥¼ ìƒì„±í•´ ì˜ë„í•œ ê²°ê³¼ê°€ ë§ê²Œ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸
* [test.jsp]
```html
<%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<div style="width: 800px; height: 500px; background-color :red; display:flex; flex-direction:row;">
<div style="width: 50px; height:30px; margin:30px; background-color: blue;"></div>
<div style="width: 50px; height:30px;margin:30px; background-color: blue;"></div>
<div style="width: 50px; height:30px;margin:30px; background-color: blue;"></div>
<div style="width: 50px; height:30px;margin:30px; background-color: blue;"></div>
</div>

<script>


</script>
```
</div>
</details>

<details>
<summary>[ì´ë²ˆ í”„ë¡œì íŠ¸ ì‹œ] ì½”ë“œì— ì¢€ ë” ì§‘ì¤‘í•˜ê¸° ìœ„í•´ Test Codeë¥¼ ì ìš©</summary>
<div markdown="1">

* Ex 1) ì¤‘ë³µ íšŒì› ê°€ì… í…ŒìŠ¤íŠ¸
```java
// ì„ì˜ì˜ íšŒì› ì •ë³´ ìƒì„±
public Member createMember() {
    MemberFormDto memberFormDto = new MemberFormDto();
    memberFormDto.setEmail("test@email.com");
    memberFormDto.setName("ê¹€ê¸¸ë™");
    memberFormDto.setAddress("ê²½ê¸°ë„");
    memberFormDto.setPassword("1234");
    return Member.createMember(memberFormDto, passwordEncoder);
}

// ì¤‘ë³µ íšŒì› ê°€ì… í…ŒìŠ¤íŠ¸
@Test
@DisplayName("ì¤‘ë³µ íšŒì› ê°€ì… í…ŒìŠ¤íŠ¸")
public void saveDuplicateMemberTest(){
    Member member1 = createMember();
    Member member2 = createMember();
    memberService.saveMember(member1);
    Throwable e = assertThrows(AppException.class, () -> {
    memberService.saveMember(member2);});

    // ë°œìƒì‹œí‚¨ ì˜ˆì™¸ì²˜ë¦¬ ë©”ì„¸ì§€ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.
    assertEquals("ê¹€ê¸¸ë™ì€ ì´ë¯¸ ìˆìŠµë‹ˆë‹¤.", e.getMessage());
}
```

* Ex 2) ë§ˆì´í˜ì´ì§€ ì¤‘ë³µ ê²Œì‹œë¬¼ ì €ì¥ í…ŒìŠ¤íŠ¸
```java
@Test
@DisplayName("ë§ˆì´í˜ì´ì§€ ì¤‘ë³µ ë ˆì‹œí”¼ ì €ì¥ í…ŒìŠ¤íŠ¸")
public void saveDuplicateCartTest() {
    Recipe recipe = saveRecipe();
    Member member = saveMember();

    CartRecipeDto cartRecipeDto = new CartRecipeDto();
    cartRecipeDto.setRecipeId(recipe.getId());

    Long cartRecipeId = cartService.addCart(cartRecipeDto, member.getEmail());
    CartRecipe cartRecipe = cartRecipeRepository.findById(cartRecipeId)
            .orElseThrow(EntityNotFoundException::new);

		// ë™ì¼í•œ ê²Œì‹œë¬¼ì„ í•œë²ˆ ë” ì €ì¥í•œë‹¤.
    // ë°œìƒì‹œí‚¨ ì˜ˆì™¸ì²˜ë¦¬ ë©”ì„¸ì§€ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.
    Throwable e = assertThrows(AppException.class, () -> {
        cartService.addCart(cartRecipeDto, member.getEmail());});
    assertEquals(recipe.getRecipeName() + "ì€ ì´ë¯¸ ì €ì¥ë˜ì–´ìˆìŠµë‹ˆë‹¤.", e.getMessage());
}
```
</div>
</details>

<details>
<summary>ëŠë‚€ì </summary>
<div markdown="1">

- Test CodeëŠ” ì‹ ì„¸ê³„ì˜€ë‹¤. Viewê°€ ì—†ì–´ë„ ì½”ë“œê°€ ë§ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤ë‹ˆ...
- í•˜ì§€ë§Œ ë‚´ê°€ ì§  Test Codeì˜ ì˜¤ë¥˜ë¡œ ë§ê²Œ ì½”ë“œë¥¼ ì§°ì§€ë§Œ í…ŒìŠ¤íŠ¸ì½”ë“œê°€ ì‹¤íŒ¨í•œë‹¤ë˜ì§€, í‹€ë¦° ì½”ë“œë¥¼ ì§°ì§€ë§Œ í…ŒìŠ¤íŠ¸ì½”ë“œê°€ ì„±ê³µí•œë‹¤ë˜ì§€... ì´ëŸ° í˜„ìƒë“¤ì´ ë°˜ë³µë¼ì„œ ì•„ì§ê¹Œì§€ëŠ” Viewì˜ ìµœì¢… í™•ì¸ì„ ë°›ëŠ”ë‹¤.
- Test Codeì— ëŒ€í•œ ë” ê¹Šì€ ì´í•´ì™€ í•™ìŠµì„ í†µí•´ êµ¬í˜„í•˜ê³ ì í•˜ëŠ” ê¸°ëŠ¥ì˜ í…ŒìŠ¤íŠ¸ì½”ë“œë¥¼ ì‘ì„±í•˜ê³ , ê·¸ë¥¼ í†µí•œ í”„ë¡œì íŠ¸ ì§„í–‰ ë°©ì‹ì„ ì ìš©ì‹œì¼œë³´ê³  ì‹¶ë‹¤.

</div>
</details>

<br>
<br>
<br>

---

<br>
<br>

ë” ìì„¸í•œ ë‚´ìš©ì€ Notionì— ìˆìŠµë‹ˆë‹¤.